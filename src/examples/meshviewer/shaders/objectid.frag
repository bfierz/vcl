#version 400 core

////////////////////////////////////////////////////////////////////////////////
// Input data from last stage
////////////////////////////////////////////////////////////////////////////////
in VertexData
{
	// IDs of the vertices that go with the barycentric coords
	flat ivec4 VertexIds;

	// Barycentric coords
	vec2 BarycentricCoords;
} In;

in int gl_PrimitiveID;

////////////////////////////////////////////////////////////////////////////////
// Output data
////////////////////////////////////////////////////////////////////////////////

// x/y: Object ID; Primitive ID
out ivec2 ObjectIds;

// x/y/z/w: Vertex IDs of primitive triangles/quad
out ivec4 VertexIds;

// x/y: Barycentric coordinates of a fragment within the triangle
out vec2 BarycentricCoords;

////////////////////////////////////////////////////////////////////////////////
// Shader constants
////////////////////////////////////////////////////////////////////////////////
uniform int ObjectIdx;

////////////////////////////////////////////////////////////////////////////////
// Implementation
////////////////////////////////////////////////////////////////////////////////
void main(void)
{
	// Store 0-based IDs
	ObjectIds.x = ObjectIdx;
    ObjectIds.y = gl_PrimitiveID;
}
